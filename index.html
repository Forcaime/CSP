<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>COLORFLUX Lab - Interactive Science Simulation</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #e3f2fd 0%, #f3e5f5 50%, #fce4ec 100%);
            min-height: 100vh;
            animation: gradientShift 15s ease infinite;
            background-size: 200% 200%;
        }

        @keyframes gradientShift {
            0%, 100% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
        }

        .navbar {
            background: white;
            box-shadow: 0 4px 20px rgba(0,0,0,0.15);
            padding: 20px;
            margin-bottom: 30px;
            border-radius: 15px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            animation: slideDown 0.6s ease;
        }

        @keyframes slideDown {
            from { transform: translateY(-100px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }

        .navbar h1 {
            background: linear-gradient(to right, #2196F3, #9C27B0);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            font-size: 28px;
            animation: pulse 2s ease-in-out infinite;
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }

        .nav-buttons {
            display: flex;
            gap: 15px;
        }

        .nav-btn {
            padding: 12px 24px;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s;
            background: white;
            color: #666;
            position: relative;
            overflow: hidden;
        }

        .nav-btn::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 0;
            height: 0;
            border-radius: 50%;
            background: rgba(33, 150, 243, 0.2);
            transform: translate(-50%, -50%);
            transition: width 0.6s, height 0.6s;
        }

        .nav-btn:hover::before {
            width: 300px;
            height: 300px;
        }

        .nav-btn:hover {
            background: #f5f5f5;
            transform: translateY(-2px);
        }

        .nav-btn.active {
            background: #e3f2fd;
            color: #2196F3;
        }

        .home-screen {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 80vh;
            text-align: center;
            animation: fadeIn 1s ease;
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        .beaker-icon {
            width: 150px;
            height: 150px;
            margin-bottom: 30px;
            position: relative;
            animation: float 3s ease-in-out infinite;
        }

        @keyframes float {
            0%, 100% { transform: translateY(0px) rotate(0deg); }
            50% { transform: translateY(-20px) rotate(5deg); }
        }

        .home-screen h1 {
            font-size: 64px;
            background: linear-gradient(to right, #2196F3, #9C27B0, #E91E63);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 20px;
            animation: textShimmer 3s ease-in-out infinite;
            background-size: 200% auto;
        }

        @keyframes textShimmer {
            0%, 100% { background-position: 0% center; }
            50% { background-position: 100% center; }
        }

        .home-screen h2 {
            font-size: 28px;
            color: #555;
            margin-bottom: 15px;
            animation: slideUp 0.8s ease 0.3s both;
        }

        @keyframes slideUp {
            from { transform: translateY(30px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }

        .home-screen p {
            font-size: 18px;
            color: #666;
            max-width: 600px;
            margin-bottom: 40px;
            animation: slideUp 0.8s ease 0.5s both;
        }

        .start-btn {
            background: linear-gradient(to right, #2196F3, #9C27B0);
            color: white;
            padding: 18px 48px;
            border: none;
            border-radius: 50px;
            font-size: 22px;
            font-weight: bold;
            cursor: pointer;
            box-shadow: 0 8px 20px rgba(33, 150, 243, 0.3);
            transition: all 0.3s;
            animation: slideUp 0.8s ease 0.7s both, glow 2s ease-in-out infinite;
            position: relative;
        }

        @keyframes glow {
            0%, 100% { box-shadow: 0 8px 20px rgba(33, 150, 243, 0.3); }
            50% { box-shadow: 0 8px 30px rgba(156, 39, 176, 0.5); }
        }

        .start-btn:hover {
            transform: scale(1.1) translateY(-3px);
            box-shadow: 0 12px 35px rgba(33, 150, 243, 0.5);
        }

        .grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            margin-bottom: 30px;
        }

        @media (max-width: 1024px) {
            .grid {
                grid-template-columns: 1fr;
            }
        }

        .card {
            background: white;
            border-radius: 20px;
            padding: 40px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            animation: cardAppear 0.6s ease;
            transition: transform 0.3s, box-shadow 0.3s;
        }

        .card:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 40px rgba(0,0,0,0.15);
        }

        @keyframes cardAppear {
            from { transform: translateY(50px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }

        .card h2 {
            font-size: 32px;
            margin-bottom: 25px;
            color: #333;
            position: relative;
            display: inline-block;
        }

        .card h2::after {
            content: '';
            position: absolute;
            bottom: -5px;
            left: 0;
            width: 0;
            height: 3px;
            background: linear-gradient(to right, #2196F3, #9C27B0);
            transition: width 0.5s ease;
        }

        .card:hover h2::after {
            width: 100%;
        }

        .slider-container {
            margin-bottom: 30px;
        }

        .slider-label {
            font-weight: 600;
            margin-bottom: 10px;
            display: block;
            color: #555;
        }

        input[type="range"] {
            width: 100%;
            height: 12px;
            border-radius: 10px;
            background: linear-gradient(to right, #E91E63, #9C27B0, #2196F3);
            outline: none;
            -webkit-appearance: none;
            transition: all 0.3s;
        }

        input[type="range"]:hover {
            transform: scaleY(1.2);
        }

        input[type="range"]::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 24px;
            height: 24px;
            background: white;
            border: 3px solid #2196F3;
            cursor: pointer;
            border-radius: 50%;
            box-shadow: 0 2px 8px rgba(0,0,0,0.2);
            transition: all 0.3s;
        }

        input[type="range"]::-webkit-slider-thumb:hover {
            transform: scale(1.3);
            box-shadow: 0 4px 15px rgba(33, 150, 243, 0.5);
        }

        input[type="range"]::-moz-range-thumb {
            width: 24px;
            height: 24px;
            background: white;
            border: 3px solid #2196F3;
            cursor: pointer;
            border-radius: 50%;
            box-shadow: 0 2px 8px rgba(0,0,0,0.2);
            transition: all 0.3s;
        }

        input[type="range"]::-moz-range-thumb:hover {
            transform: scale(1.3);
            box-shadow: 0 4px 15px rgba(33, 150, 243, 0.5);
        }

        .range-labels {
            display: flex;
            justify-content: space-between;
            font-size: 12px;
            color: #666;
            margin-top: 5px;
        }

        select {
            width: 100%;
            padding: 15px;
            border: 2px solid #ddd;
            border-radius: 10px;
            font-size: 16px;
            margin-bottom: 30px;
            cursor: pointer;
            transition: all 0.3s;
        }

        select:focus {
            outline: none;
            border-color: #2196F3;
            box-shadow: 0 0 15px rgba(33, 150, 243, 0.3);
        }

        select:hover {
            border-color: #9C27B0;
        }

        .glass-container {
            position: relative;
            height: 400px;
            background: linear-gradient(to bottom, #f5f5f5, #e0e0e0);
            border-radius: 20px;
            display: flex;
            align-items: flex-end;
            justify-content: center;
            padding: 40px;
            overflow: hidden;
            margin-bottom: 30px;
        }

        .glass {
            position: relative;
            width: 200px;
            height: 320px;
            background: rgba(255, 255, 255, 0.3);
            border: 4px solid white;
            border-radius: 50% 50% 15px 15px;
            box-shadow: 0 20px 50px rgba(0,0,0,0.2);
            overflow: hidden;
            animation: glassShine 4s ease-in-out infinite;
        }

        @keyframes glassShine {
            0%, 100% { box-shadow: 0 20px 50px rgba(0,0,0,0.2); }
            50% { box-shadow: 0 20px 60px rgba(33, 150, 243, 0.3); }
        }

        .liquid {
            position: absolute;
            bottom: 0;
            width: 100%;
            height: 85%;
            transition: background-color 1s ease;
            animation: liquidWave 3s ease-in-out infinite;
        }

        @keyframes liquidWave {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-5px); }
        }

        .bubble {
            position: absolute;
            top: 20px;
            left: 50%;
            transform: translateX(-50%);
            width: 60px;
            height: 60px;
            background: rgba(255, 255, 255, 0.4);
            border-radius: 50%;
            animation: bubbleFloat 4s ease-in-out infinite;
        }

        @keyframes bubbleFloat {
            0%, 100% { transform: translateX(-50%) translateY(0); }
            50% { transform: translateX(-50%) translateY(-10px); }
        }

        .bubble-small {
            position: absolute;
            top: 25px;
            left: 50%;
            transform: translateX(-50%);
            width: 45px;
            height: 45px;
            background: rgba(255, 255, 255, 0.6);
            border-radius: 50%;
            animation: bubbleFloat 3s ease-in-out infinite 0.5s;
        }

        .droplet {
            position: absolute;
            top: 80px;
            left: 50%;
            transform: translateX(-50%);
            font-size: 48px;
            animation: drop 2s ease-out;
            display: none;
            filter: drop-shadow(0 4px 8px rgba(0,0,0,0.3));
        }

        @keyframes drop {
            0% { top: 80px; opacity: 1; transform: translateX(-50%) scale(1); }
            50% { transform: translateX(-50%) scale(1.2); }
            100% { top: 200px; opacity: 0; transform: translateX(-50%) scale(0.8); }
        }

        .droplet.active {
            display: block;
        }

        .diffusion {
            position: absolute;
            inset: 0;
            border-radius: 50%;
            filter: blur(60px);
            opacity: 0.6;
            transform: scale(0);
            transition: transform 2s ease-out;
        }

        .diffusion.active {
            transform: scale(2);
            animation: diffusionPulse 2s ease-out;
        }

        @keyframes diffusionPulse {
            0%, 100% { opacity: 0.6; }
            50% { opacity: 0.8; }
        }

        .button-group {
            display: flex;
            gap: 15px;
        }

        .btn {
            flex: 1;
            padding: 15px 30px;
            border: none;
            border-radius: 10px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            position: relative;
            overflow: hidden;
        }

        .btn::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 0;
            height: 0;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.3);
            transform: translate(-50%, -50%);
            transition: width 0.6s, height 0.6s;
        }

        .btn:hover::before {
            width: 400px;
            height: 400px;
        }

        .btn-primary {
            background: linear-gradient(to right, #2196F3, #9C27B0);
            color: white;
            box-shadow: 0 4px 15px rgba(33, 150, 243, 0.3);
        }

        .btn-primary:hover:not(:disabled) {
            transform: translateY(-3px);
            box-shadow: 0 6px 25px rgba(33, 150, 243, 0.4);
        }

        .btn-primary:active:not(:disabled) {
            transform: translateY(-1px);
        }

        .btn-primary:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none;
        }

        .btn-secondary {
            background: white;
            color: #666;
            border: 2px solid #ddd;
        }

        .btn-secondary:hover {
            background: #f5f5f5;
            border-color: #9C27B0;
            transform: translateY(-2px);
        }

        .ph-meter-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            margin-top: 25px;
        }

        .ph-meter {
            background: #e3f2fd;
            border: 2px solid #2196F3;
            border-radius: 10px;
            padding: 20px;
            transition: all 0.3s;
        }

        .ph-meter:hover {
            transform: translateY(-3px);
            box-shadow: 0 5px 20px rgba(33, 150, 243, 0.3);
        }

        .ph-meter.solvent {
            background: #f3e5f5;
            border-color: #9C27B0;
        }

        .ph-meter.solvent:hover {
            box-shadow: 0 5px 20px rgba(156, 39, 176, 0.3);
        }

        .ph-meter h3 {
            color: #1976D2;
            margin-bottom: 10px;
            font-size: 16px;
        }

        .ph-meter.solvent h3 {
            color: #7B1FA2;
        }

        .ph-value {
            font-size: 38px;
            font-weight: bold;
            color: #2196F3;
            animation: numberPulse 2s ease-in-out infinite;
        }

        @keyframes numberPulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }

        .ph-meter.solvent .ph-value {
            color: #9C27B0;
        }

        .color-name {
            font-size: 14px;
            color: #1976D2;
            margin-top: 5px;
        }

        .ph-meter.solvent .color-name {
            color: #7B1FA2;
        }

        .explanation-box {
            background: linear-gradient(to right, #e3f2fd, #f3e5f5);
            border: 2px solid #2196F3;
            border-radius: 15px;
            padding: 25px;
            margin-bottom: 25px;
            animation: fadeIn 0.5s ease;
        }

        .explanation-box p {
            color: #555;
            font-size: 18px;
            line-height: 1.6;
        }

        .tabs {
            display: flex;
            border-bottom: 2px solid #ddd;
            margin-bottom: 25px;
            gap: 5px;
            overflow-x: auto;
        }

        .tab {
            padding: 15px 25px;
            border: none;
            background: none;
            cursor: pointer;
            font-weight: 600;
            color: #666;
            border-bottom: 2px solid transparent;
            transition: all 0.3s;
            white-space: nowrap;
            position: relative;
        }

        .tab::after {
            content: '';
            position: absolute;
            bottom: -2px;
            left: 50%;
            width: 0;
            height: 2px;
            background: #2196F3;
            transition: all 0.3s;
            transform: translateX(-50%);
        }

        .tab:hover {
            color: #333;
        }

        .tab:hover::after {
            width: 80%;
        }

        .tab.active {
            color: #2196F3;
        }

        .tab.active::after {
            width: 100%;
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
            animation: tabFadeIn 0.5s ease;
        }

        @keyframes tabFadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .tab-content h3 {
            font-size: 24px;
            margin-bottom: 15px;
            color: #333;
        }

        .tab-content p, .tab-content li {
            color: #555;
            line-height: 1.8;
            margin-bottom: 12px;
        }

        .tab-content ul {
            margin-left: 25px;
            margin-bottom: 15px;
        }

        .code-block {
            background: #1e1e1e;
            color: #4EC9B0;
            padding: 20px;
            border-radius: 10px;
            font-family: 'Courier New', monospace;
            margin: 15px 0;
            overflow-x: auto;
            box-shadow: 0 5px 15px rgba(0,0,0,0.3);
            animation: codeGlow 3s ease-in-out infinite;
        }

        @keyframes codeGlow {
            0%, 100% { box-shadow: 0 5px 15px rgba(0,0,0,0.3); }
            50% { box-shadow: 0 5px 20px rgba(78, 201, 176, 0.3); }
        }

        .formula-box {
            background: #f5f5f5;
            padding: 20px;
            border-radius: 10px;
            font-family: 'Courier New', monospace;
            margin: 15px 0;
            border-left: 4px solid #2196F3;
            transition: all 0.3s;
        }

        .formula-box:hover {
            transform: translateX(5px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }

        .collab-section {
            background: white;
            border-radius: 20px;
            padding: 40px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            margin-top: 30px;
            animation: cardAppear 0.8s ease;
        }

        .collab-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }

        .collab-card {
            padding: 20px;
            border-radius: 10px;
            border: 2px solid;
            transition: all 0.3s;
            animation: cardBounce 0.6s ease;
        }

        @keyframes cardBounce {
            0% { transform: scale(0.8); opacity: 0; }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); opacity: 1; }
        }

        .collab-card:hover {
            transform: translateY(-5px) scale(1.02);
            box-shadow: 0 10px 25px rgba(0,0,0,0.15);
        }

        .collab-card.blue {
            background: #e3f2fd;
            border-color: #2196F3;
        }

        .collab-card.purple {
            background: #f3e5f5;
            border-color: #9C27B0;
        }

        .collab-card.pink {
            background: #fce4ec;
            border-color: #E91E63;
        }

        .data-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
            animation: fadeIn 0.8s ease;
        }

        .data-table th, .data-table td {
            padding: 15px;
            text-align: left;
            border-bottom: 1px solid #ddd;
            transition: all 0.3s;
        }

        .data-table tbody tr {
            animation: tableRowAppear 0.5s ease;
        }

        @keyframes tableRowAppear {
            from { transform: translateX(-30px); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }

        .data-table tbody tr:hover {
            background: #f5f5f5;
            transform: scale(1.01);
        }

        .data-table th {
            background: #f5f5f5;
            font-weight: 600;
        }

        .color-badge {
            display: inline-block;
            padding: 5px 15px;
            border-radius: 20px;
            color: white;
            font-weight: 600;
            animation: badgePulse 2s ease-in-out infinite;
        }

        @keyframes badgePulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }

        .delete-btn {
            background: #f44336;
            color: white;
            border: none;
            padding: 5px 15px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 12px;
            font-weight: 600;
            transition: all 0.3s;
        }

        .delete-btn:hover {
            background: #d32f2f;
            transform: scale(1.1);
            box-shadow: 0 3px 10px rgba(244, 67, 54, 0.4);
        }

        .chart-bar {
            display: flex;
            align-items: center;
            gap: 15px;
            margin-bottom: 15px;
            animation: chartBarAppear 0.8s ease;
        }

        @keyframes chartBarAppear {
            from { transform: translateX(-50px); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }

        .chart-label {
            width: 150px;
            font-family: monospace;
            font-size: 14px;
        }

        .chart-track {
            flex: 1;
            background: #e0e0e0;
            height: 32px;
            border-radius: 20px;
            overflow: hidden;
            position: relative;
            box-shadow: inset 0 2px 5px rgba(0,0,0,0.1);
        }

        .chart-fill {
            height: 100%;
            border-radius: 20px;
            display: flex;
            align-items: center;
            justify-content: flex-end;
            padding-right: 12px;
            color: white;
            font-weight: bold;
            transition: width 0.8s cubic-bezier(0.68, -0.55, 0.265, 1.55);
            position: relative;
            overflow: hidden;
        }

        .chart-fill::after {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.3), transparent);
            animation: shimmer 2s infinite;
        }

        @keyframes shimmer {
            0% { left: -100%; }
            100% { left: 100%; }
        }

        .chart-name {
            width: 80px;
            text-align: right;
        }

        .hidden {
            display: none !important;
        }

        .clear-all-btn {
            background: #ff5722;
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 10px;
            cursor: pointer;
            font-weight: 600;
            margin-top: 20px;
            transition: all 0.3s;
        }

        .clear-all-btn:hover {
            background: #e64a19;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(255, 87, 34, 0.4);
        }
    </style>
</head>
<body>
    <div id="app">
        <!-- Home Screen -->
        <div id="homeScreen" class="home-screen">
            <div class="beaker-icon">
                <svg viewBox="0 0 100 100" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M30 10 L30 40 L20 80 C20 90 30 95 50 95 C70 95 80 90 80 80 L70 40 L70 10 Z" 
                          stroke="#2196F3" stroke-width="3" fill="none"/>
                    <path d="M25 70 L75 70 L75 90 C75 92 65 95 50 95 C35 95 25 92 25 90 Z" 
                          fill="#4A90E2" opacity="0.7"/>
                    <circle cx="50" cy="25" r="8" fill="white" opacity="0.4"/>
                </svg>
            </div>
            <h1>COLORFLUX Lab</h1>
            <h2>Color-Shifting Lemonade Science Simulation</h2>
            <p>Research Question : "How can the pH-sensitive properties of butterfly pea flower (Clitoria ternatea) anthocyanins be utilized to develop a color-shifting lemonade drink that enhances scientific understanding, visual engagement, and practicality for educational and daily consumption purposes compared to conventional lemonade?"</p>
            <button class="start-btn" onclick="showPage('simulation')">‚ñ∂ Start Experiment</button>
        </div>

        <!-- Navigation -->
        <div id="navigation" class="navbar hidden">
            <h1>COLORFLUX Lab</h1>
            <div class="nav-buttons">
                <button class="nav-btn active" onclick="showPage('simulation')">üî¨ Simulation</button>
                <button class="nav-btn" onclick="showPage('data')">üìä Data</button>
            </div>
        </div>

        <!-- Simulation Page -->
        <div id="simulationPage" class="container hidden">
            <div class="grid">
                <div class="card">
                    <h2>Virtual Drink Simulator</h2>
                    
                    <div class="slider-container">
                        <label class="slider-label">Solute pH Level (Acid to Add): <span id="solutePHValue">2.0</span></label>
                        <input type="range" id="solutePHSlider" min="1" max="4" step="0.1" value="2.0">
                        <div class="range-labels">
                            <span>Very Acidic (1.0)</span>
                            <span>Moderately Acidic (4.0)</span>
                        </div>
                        <p style="font-size: 12px; color: #666; margin-top: 5px;">‚ö†Ô∏è Lower pH = More acidic = More pink when mixed!</p>
                    </div>

                    <div class="slider-container">
                        <label class="slider-label">Solvent pH Level (Blue Base): <span id="solventPHValue">9.0</span></label>
                        <input type="range" id="solventPHSlider" min="7" max="14" step="0.1" value="9.0">
                        <div class="range-labels">
                            <span>Neutral (7.0)</span>
                            <span>Strongly Basic (14.0)</span>
                        </div>
                    </div>

                    <div class="slider-container">
                        <label class="slider-label">Acid Type</label>
                        <select id="acidType">
                            <option value="citric">Citric Acid (Lemon)</option>
                            <option value="vinegar">Acetic Acid (Vinegar)</option>
                            <option value="ascorbic">Ascorbic Acid (Vitamin C)</option>
                        </select>
                    </div>

                    <div class="glass-container">
                        <div class="droplet" id="droplet">üíß</div>
                        <div class="glass">
                            <div class="liquid" id="liquid">
                                <div class="diffusion" id="diffusion"></div>
                            </div>
                            <div class="bubble"></div>
                            <div class="bubble-small"></div>
                        </div>
                    </div>

                    <div class="button-group">
                        <button class="btn btn-primary" id="activatorBtn" onclick="addActivator()">
                            üíß Add Activator Shot
                        </button>
                        <button class="btn btn-secondary" onclick="resetExperiment()">
                            ‚Üª Reset
                        </button>
                    </div>

                    <div class="ph-meter-grid">
                        <div class="ph-meter">
                            <h3>‚öóÔ∏è Solute pH (Acid Shot)</h3>
                            <div class="ph-value" id="solutePHDisplay">2.0</div>
                            <div class="color-name">Activator to Add</div>
                        </div>
                        <div class="ph-meter solvent">
                            <h3>üß™ Solvent pH (Blue Base)</h3>
                            <div class="ph-value" id="solventPHDisplay">9.0</div>
                            <div class="color-name">Your Blue Lemonade</div>
                        </div>
                    </div>
                    
                    <div class="ph-meter" style="margin-top: 15px;">
                        <h3>üìä Current Solution pH</h3>
                        <div class="ph-value" id="finalPHDisplay">9.0</div>
                        <div class="color-name">Current Color: <span id="colorName">Deep Blue</span></div>
                    </div>
                </div>

                <!-- Right Panel - Explanation -->
                <div class="card">
                    <h2>What Happened?</h2>
                    
                    <div class="explanation-box">
                        <p id="explanation">Anthocyanins remain in their neutral quinoidal base form, appearing blue.</p>
                    </div>

                    <div class="tabs">
                        <button class="tab active" onclick="showTab('chemistry')">üß™ Chemistry</button>
                        <button class="tab" onclick="showTab('biology')">üß¨ Biology</button>
                        <button class="tab" onclick="showTab('physics')">‚öõÔ∏è Physics</button>
                        <button class="tab" onclick="showTab('computer')">üíª Computer Science</button>
                    </div>

                    <div id="chemistryTab" class="tab-content active">
                        <h3>Anthocyanin Chemistry</h3>
                        <p><strong>pH Scale:</strong> Measures hydrogen ion concentration from 0 (very acidic) to 14 (very basic)</p>
                        <p><strong>How it works:</strong> Your blue lemonade starts in a basic state. When you add acidic solute, it shifts toward pink!</p>
                        <p><strong>Anthocyanins</strong> are flavonoid pigments that change structure based on pH:</p>
                        <ul>
                            <li><strong>pH &gt; 8 (Basic):</strong> Anionic form (deep blue) - In basic solutions like your blue lemonade, anthocyanins are deprotonated and appear blue</li>
                            <li><strong>pH 6-8 (Near Neutral):</strong> Quinoidal base (blue) - Still mostly deprotonated</li>
                            <li><strong>pH 4-6 (Slightly Acidic):</strong> Quinoidal/Flavylium equilibrium (purple) - Partial protonation creates purple transition</li>
                            <li><strong>pH 2-4 (Acidic):</strong> Flavylium cation (pink) - When acid is added, protonation occurs</li>
                            <li><strong>pH &lt; 2 (Very Acidic):</strong> Fully protonated flavylium (deep pink/red) - Maximum protonation</li>
                        </ul>
                        <div class="formula-box">
                            <div><strong>In Basic Solution (Blue Lemonade):</strong></div>
                            <div>Anthocyanin‚Åª (blue, anionic form)</div>
                            <div style="margin-top: 10px;"><strong>Adding Acid (Activator Shot):</strong></div>
                            <div>Anthocyanin‚Åª + H‚Å∫ ‚Üí Anthocyanin (neutral)</div>
                            <div>Anthocyanin + H‚Å∫ ‚Üí Anthocyanin-H‚Å∫ (pink, cationic form)</div>
                            <div style="color: #666; margin-top: 10px;">(More acid = More protonation = More pink!)</div>
                        </div>
                    </div>

                    <div id="biologyTab" class="tab-content">
                        <h3>Biological Role of Anthocyanins</h3>
                        <p><strong>Plant Pigments:</strong> Anthocyanins are responsible for red, purple, and blue colors in many fruits and flowers</p>
                        <ul>
                            <li><strong>Protection:</strong> Shield plants from UV radiation and oxidative stress</li>
                            <li><strong>Attraction:</strong> Signal ripeness to animals for seed dispersal</li>
                            <li><strong>Cell Communication:</strong> Function in plant stress responses</li>
                        </ul>
                        <p><strong>Molecular Flux:</strong> In biological systems, anthocyanins move across cell membranes and accumulate in vacuoles where pH determines their color</p>
                    </div>

                    <div id="physicsTab" class="tab-content">
                        <h3>Diffusion & Flux</h3>
                        <p><strong>Diffusion:</strong> The movement of particles from high to low concentration</p>
                        <p><strong>Flux (Œ¶):</strong> Rate of particle flow through a surface</p>
                        <div class="formula-box">
                            <p style="font-weight: bold; margin-bottom: 10px;">Fick's First Law:</p>
                            <p>Œ¶ = -D √ó (dC/dx)</p>
                            <p style="font-size: 14px; color: #666; margin-top: 10px;">where D is diffusion coefficient and dC/dx is concentration gradient</p>
                        </div>
                        <p>In the simulation, when you add the activator shot, acid molecules diffuse through the liquid, creating a concentration gradient that drives the color change outward from the point of addition.</p>
                    </div>

                    <div id="computerTab" class="tab-content">
                        <h3>Computational Model</h3>
                        <p><strong>State Machine:</strong> The simulation uses a finite state machine to model color changes</p>
                        <div class="code-block">
function getColor(pH) {
  if (pH > 6) {
    return "blue";
  } else if (pH > 4) {
    return "purple";
  } else {
    return "pink";
  }
}
                        </div>
                        <p><strong>Input:</strong> Solute pH, Solvent pH, acid type</p>
                        <p><strong>Process:</strong> Calculate final pH and evaluate state based on thresholds</p>
                        <p><strong>Output:</strong> Color value and visual representation</p>
                        <p style="background: #e3f2fd; padding: 15px; border-radius: 8px; margin-top: 15px; font-size: 14px;">
                            This demonstrates how scientific systems can be modeled computationally using conditional logic and state transitions.
                        </p>
                    </div>
                </div>
            </div>

            <!-- Collaborative Section -->
            <div class="collab-section">
                <h2>üë• Collaborative Science Mode</h2>
                <p style="color: #666; margin-bottom: 20px;">
                    In a full implementation, this feature would allow multiple users to join the same virtual experiment and control different parameters collaboratively in real-time.
                </p>
                <div class="collab-grid">
                    <div class="collab-card blue">
                        <p style="font-weight: bold; color: #1976D2;">User 1</p>
                        <p style="color: #2196F3; font-size: 14px;">Controls: Solute pH Level</p>
                    </div>
                    <div class="collab-card purple">
                        <p style="font-weight: bold; color: #7B1FA2;">User 2</p>
                        <p style="color: #9C27B0; font-size: 14px;">Controls: Solvent pH Level</p>
                    </div>
                    <div class="collab-card pink">
                        <p style="font-weight: bold; color: #C2185B;">User 3</p>
                        <p style="color: #E91E63; font-size: 14px;">Controls: Acid Type</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Data Page -->
        <div id="dataPage" class="container hidden">
            <div class="card">
                <h2>üìä Experiment Data & Analysis</h2>
                
                <h3 style="margin-top: 30px; margin-bottom: 15px;">pH vs Color Observations</h3>
                <table class="data-table" id="dataTable">
                    <thead>
                        <tr>
                            <th>Time</th>
                            <th>Solute pH</th>
                            <th>Solvent pH</th>
                            <th>Final pH</th>
                            <th>Acid Type</th>
                            <th>Resulting Color</th>
                            <th>Action</th>
                        </tr>
                    </thead>
                    <tbody id="dataTableBody">
                        <tr>
                            <td colspan="7" style="text-align: center; color: #999;">No experiments recorded yet. Run some simulations!</td>
                        </tr>
                    </tbody>
                </table>
                <button class="clear-all-btn" onclick="clearAllData()">üóëÔ∏è Clear All Data</button>

                <h3 style="margin-top: 40px; margin-bottom: 20px;">Color Distribution by Final pH Range</h3>
                <div id="chartContainer">
                    <div class="chart-bar">
                        <div class="chart-label">pH &gt; 6.0</div>
                        <div class="chart-track">
                            <div class="chart-fill" id="blueBar" style="width: 0%; background-color: #1E88E5;">0</div>
                        </div>
                        <div class="chart-name">Blue</div>
                    </div>
                    <div class="chart-bar">
                        <div class="chart-label">4.0 &lt; pH ‚â§ 6.0</div>
                        <div class="chart-track">
                            <div class="chart-fill" id="purpleBar" style="width: 0%; background-color: #9B59B6;">0</div>
                        </div>
                        <div class="chart-name">Purple</div>
                    </div>
                    <div class="chart-bar">
                        <div class="chart-label">2.0 &lt; pH ‚â§ 4.0</div>
                        <div class="chart-track">
                            <div class="chart-fill" id="pinkBar" style="width: 0%; background-color: #E91E63;">0</div>
                        </div>
                        <div class="chart-name">Pink</div>
                    </div>
                    <div class="chart-bar">
                        <div class="chart-label">pH ‚â§ 2.0</div>
                        <div class="chart-track">
                            <div class="chart-fill" id="deepPinkBar" style="width: 0%; background-color: #D81B60;">0</div>
                        </div>
                        <div class="chart-name">Deep Pink</div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        let currentPage = 'home';
        let solutePH = 2.0; // ACIDIC - what we're adding
        let solventPH = 9.0; // BASIC - the blue lemonade
        let displayPH = 9.0; // Start showing solvent pH (blue)
        let acidType = 'citric';
        let experimentData = [];
        let isAnimating = false;
        let isMixed = false;

        function calculateFinalPH() {
            // Simplified pH calculation (assuming equal volumes and mixing)
            // In reality, this would be more complex based on concentration and pKa values
            finalPH = (solutePH + solventPH) / 2;
            return finalPH;
        }

        function getColor(ph) {
            // Always return blue if not mixed yet (showing solvent)
            if (!isMixed) {
                return { hex: '#1E88E5', name: 'Deep Blue' };
            }
            
            // After mixing, show actual pH-based color
            if (ph > 8) return { hex: '#1E88E5', name: 'Deep Blue' };
            if (ph > 6) return { hex: '#4A90E2', name: 'Blue' };
            if (ph > 5) return { hex: '#7B68EE', name: 'Blue-Purple' };
            if (ph > 4) return { hex: '#9B59B6', name: 'Purple' };
            if (ph > 3) return { hex: '#C2185B', name: 'Pink-Purple' };
            if (ph > 2) return { hex: '#E91E63', name: 'Pink' };
            return { hex: '#D81B60', name: 'Deep Pink' };
        }

        function getExplanation(ph) {
            if (ph > 8) return "In this basic environment (pH > 8), anthocyanins exist in their anionic quinoidal form, displaying a deep blue color. The hydroxide ions keep the molecules deprotonated.";
            if (ph > 6) return "At pH 6-8, anthocyanins remain in their neutral quinoidal base form, appearing blue. The solution is near neutral to slightly basic.";
            if (ph > 4) return "At pH 4-6, protonation begins to alter anthocyanin structure. The molecules shift between neutral and cationic forms, shifting absorption wavelengths toward purple.";
            if (ph > 2) return "In this acidic environment (pH 2-4), increased protonation stabilizes the flavylium cation, producing pink color through resonance structures.";
            return "In highly acidic conditions (pH < 2), anthocyanins are fully protonated as flavylium cations, displaying an intense deep pink to red color.";
        }

        function showPage(page) {
            currentPage = page;
            
            document.getElementById('homeScreen').classList.add('hidden');
            document.getElementById('navigation').classList.remove('hidden');
            document.getElementById('simulationPage').classList.add('hidden');
            document.getElementById('dataPage').classList.add('hidden');

            document.querySelectorAll('.nav-btn').forEach(btn => btn.classList.remove('active'));

            if (page === 'simulation') {
                document.getElementById('simulationPage').classList.remove('hidden');
                document.querySelectorAll('.nav-btn')[0].classList.add('active');
            } else if (page === 'data') {
                document.getElementById('dataPage').classList.remove('hidden');
                document.querySelectorAll('.nav-btn')[1].classList.add('active');
                updateDataDisplay();
            }
        }

        function updateLiquidColor() {
            // BEFORE mixing: Always show BLUE (solvent is always blue/basic)
            // AFTER mixing: Show the final color based on mixed pH
            const color = getColor(displayPH);
            document.getElementById('liquid').style.backgroundColor = color.hex;
            document.getElementById('diffusion').style.background = `radial-gradient(circle, ${color.hex} 0%, transparent 70%)`;
            
            document.getElementById('solutePHValue').textContent = solutePH.toFixed(1);
            document.getElementById('solutePHDisplay').textContent = solutePH.toFixed(1);
            
            document.getElementById('solventPHValue').textContent = solventPH.toFixed(1);
            document.getElementById('solventPHDisplay').textContent = solventPH.toFixed(1);
            
            document.getElementById('finalPHDisplay').textContent = displayPH.toFixed(1);
            document.getElementById('colorName').textContent = color.name;
            
            if (!isMixed) {
                document.getElementById('explanation').textContent = "Your blue lemonade (basic solvent) is ready. The anthocyanins are in their deprotonated, anionic form, appearing blue. Add the acidic activator shot to protonate them and watch the color shift to pink!";
            } else {
                document.getElementById('explanation').textContent = getExplanation(displayPH);
            }
        }

        function addActivator() {
            if (isAnimating) return;
            
            isAnimating = true;
            isMixed = true;
            const droplet = document.getElementById('droplet');
            const diffusion = document.getElementById('diffusion');
            const btn = document.getElementById('activatorBtn');
            
            btn.disabled = true;
            droplet.classList.add('active');
            
            // Calculate the final pH after mixing
            finalPH = calculateFinalPH();
            
            // Animate the color change
            setTimeout(() => {
                diffusion.classList.add('active');
                // Gradually transition to final color
                displayPH = finalPH;
                updateLiquidColor();
            }, 500);

            const color = getColor(finalPH);
            const newData = {
                time: new Date().toLocaleTimeString(),
                solutePH: solutePH,
                solventPH: solventPH,
                finalPH: finalPH,
                acidType: acidType,
                color: color.name
            };
            experimentData.push(newData);

            setTimeout(() => {
                droplet.classList.remove('active');
                diffusion.classList.remove('active');
                isAnimating = false;
                btn.disabled = false;
            }, 2500);
        }

        function resetExperiment() {
            solutePH = 2.0;
            solventPH = 9.0;
            displayPH = 9.0; // Reset to solvent pH (blue)
            isMixed = false;
            document.getElementById('solutePHSlider').value = 2.0;
            document.getElementById('solventPHSlider').value = 9.0;
            document.getElementById('acidType').value = 'citric';
            acidType = 'citric';
            updateLiquidColor();
            
            document.getElementById('droplet').classList.remove('active');
            document.getElementById('diffusion').classList.remove('active');
            isAnimating = false;
            document.getElementById('activatorBtn').disabled = false;
        }

        function showTab(tabName) {
            document.querySelectorAll('.tab').forEach(tab => tab.classList.remove('active'));
            document.querySelectorAll('.tab-content').forEach(content => content.classList.remove('active'));
            
            event.target.classList.add('active');
            document.getElementById(tabName + 'Tab').classList.add('active');
        }

        function deleteData(index) {
            experimentData.splice(index, 1);
            updateDataDisplay();
        }

        function clearAllData() {
            if (confirm('Are you sure you want to clear all experiment data?')) {
                experimentData = [];
                updateDataDisplay();
            }
        }

        function updateDataDisplay() {
            const tbody = document.getElementById('dataTableBody');
            
            if (experimentData.length === 0) {
                tbody.innerHTML = '<tr><td colspan="7" style="text-align: center; color: #999;">No experiments recorded yet. Run some simulations!</td></tr>';
            } else {
                tbody.innerHTML = experimentData.map((data, index) => `
                    <tr>
                        <td>${data.time}</td>
                        <td>${data.solutePH.toFixed(1)}</td>
                        <td>${data.solventPH.toFixed(1)}</td>
                        <td><strong>${data.finalPH.toFixed(1)}</strong></td>
                        <td style="text-transform: capitalize;">${data.acidType}</td>
                        <td><span class="color-badge" style="background-color: ${getColor(data.finalPH).hex};">${data.color}</span></td>
                        <td><button class="delete-btn" onclick="deleteData(${index})">Delete</button></td>
                    </tr>
                `).join('');
            }

            const blueCount = experimentData.filter(d => d.finalPH > 6).length;
            const purpleCount = experimentData.filter(d => d.finalPH > 4 && d.finalPH <= 6).length;
            const pinkCount = experimentData.filter(d => d.finalPH > 2 && d.finalPH <= 4).length;
            const deepPinkCount = experimentData.filter(d => d.finalPH <= 2).length;
            const total = experimentData.length || 1;

            document.getElementById('blueBar').style.width = `${(blueCount / total) * 100}%`;
            document.getElementById('blueBar').textContent = blueCount;
            
            document.getElementById('purpleBar').style.width = `${(purpleCount / total) * 100}%`;
            document.getElementById('purpleBar').textContent = purpleCount;
            
            document.getElementById('pinkBar').style.width = `${(pinkCount / total) * 100}%`;
            document.getElementById('pinkBar').textContent = pinkCount;
            
            document.getElementById('deepPinkBar').style.width = `${(deepPinkCount / total) * 100}%`;
            document.getElementById('deepPinkBar').textContent = deepPinkCount;
        }

        document.getElementById('solutePHSlider').addEventListener('input', (e) => {
            solutePH = parseFloat(e.target.value);
            // Only update the display numbers, DON'T change liquid color
            document.getElementById('solutePHValue').textContent = solutePH.toFixed(1);
            document.getElementById('solutePHDisplay').textContent = solutePH.toFixed(1);
        });

        document.getElementById('solventPHSlider').addEventListener('input', (e) => {
            solventPH = parseFloat(e.target.value);
            // DON'T change liquid color - it stays blue until acid is added!
            // Only update the display numbers
            document.getElementById('solventPHValue').textContent = solventPH.toFixed(1);
            document.getElementById('solventPHDisplay').textContent = solventPH.toFixed(1);
        });

        document.getElementById('acidType').addEventListener('change', (e) => {
            acidType = e.target.value;
        });

        updateLiquidColor();
    </script>
</body>
</html>
